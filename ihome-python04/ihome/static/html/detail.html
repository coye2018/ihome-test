<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>爱家-房间信息</title>
    <link href="/static/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="/static/css/reset.css" rel="stylesheet">
    <link href="/static/plugins/swiper/css/swiper.min.css" rel="stylesheet">
    <link href="/static/plugins/bootstrap-datepicker/css/bootstrap-datepicker.min.css" rel="stylesheet">
    <link href="/static/css/ihome/main.css" rel="stylesheet">
    <link href="/static/css/ihome/detail.css" rel="stylesheet">
</head>
<body>

<div class="container"><!--
    <div class="top-bar">
        <div class="nav-bar">
            <h3 class="page-title">房间信息</h3>
            <a class="nav-btn fl" href="#" onclick="hrefBack();"><span><i class="fa fa-angle-left fa-2x"></i></span></a>
        </div>
    </div>
    <div class="swiper-container">
        <ul class="swiper-wrapper">
            <li class="swiper-slide"><img src="/static/images/home01.jpg"></li>
            <li class="swiper-slide"><img src="/static/images/home02.jpg"></li>
            <li class="swiper-slide"><img src="/static/images/home03.jpg"></li>
        </ul>
        <div class="swiper-pagination"></div>
        <div class="house-price">￥<span>300</span>/晚</div>
    </div>
    <div class="detail-con">
        <div class="detail-header layout-style">
            <h2 class="house-title">房屋标题</h2>
            <div class="landlord-pic"><img src="/static/images/landlord01.jpg"></div>
            <h2 class="landlord-name">房东： <span>房东姓名</span></h2>
        </div>
        <div class="house-info layout-style">
            <h3>房屋地址</h3>
            <ul class="house-info-list text-center">
                <li>地址内容中关村</li>
            </ul>
        </div>
        <ul class="house-type layout-style">
            <li>
                <span class="icon-house"></span>
                <div class="icon-text">
                    <h3>出租6间</h3>
                    <p>房屋面积:200平米</p>
                    <p>房屋户型:三室两厅两卫</p>
                </div>
            </li>
            <li>
                <span class="icon-user"></span>
                <div class="icon-text">
                    <h3>宜住10人</h3>
                </div>
            </li>
            <li>
                <span class="icon-bed"></span>
                <div class="icon-text">
                    <h3>卧床配置</h3>
                    <p>双人床两张</p>
                </div>
            </li>
        </ul>
        <div class="house-info layout-style">
            <h3>房间详情</h3>
            <ul class="house-info-list">
                <li>收取押金<span>2000</span></li>
                <li>最少入住天数<span>1</span></li>
                <li>最多入住天数<span>无限制</span></li>
            </ul>
        </div>
        <div class="house-facility layout-style">
            <h3>配套设施</h3>
            <ul class="house-facility-list clearfix">
                <li><span class="wirelessnetwork-ico"></span>无线网络</li>
                <li><span class="shower-ico"></span>热水淋浴</li>
                <li><span class="aircondition-ico"></span>空调</li>
                <li><span class="heater-ico"></span>暖气</li>
                <li><span class="smoke-ico"></span>允许吸烟</li>
                <li><span class="drinking-ico"></span>饮水设备</li>
                <li><span class="brush-ico"></span>牙具</li>
                <li><span class="soap-ico"></span>香皂</li>
                <li><span class="slippers-ico"></span>拖鞋</li>
                <li><span class="toiletpaper-ico"></span>手纸</li>
                <li><span class="towel-ico"></span>毛巾</li>
                <li><span class="toiletries-ico"></span>沐浴露、洗发露</li>
                <li><span class="icebox-ico"></span>冰箱</li>
                <li><span class="washer-ico"></span>洗衣机</li>
                <li><span class="elevator-ico"></span>电梯</li>
                <li><span class="iscook-ico"></span>允许做饭</li>
                <li><span class="pet-ico"></span>允许带宠物</li>
                <li><span class="meet-ico"></span>允许聚会</li>
                <li><span class="accesssys-ico"></span>门禁系统</li>
                <li><span class="parkingspace-ico"></span>停车位</li>
                <li><span class="wirednetwork-ico"></span>有线网络</li>
                <li><span class="tv-ico"></span>电视</li>
                <li><span class="jinzhi-ico"></span>浴缸</li>
            </ul>
        </div>
        <div class="house-info layout-style">
            <h3>评价信息</h3>
            <ul class="house-comment-list">
                <li>
                    <p>用户名<span class="fr">2016-11-11 20:00:00</span></p>
                    <p>感觉不错</p>
                </li>
            </ul>
        </div>
    </div>
    <a class="book-house" href="">即刻预定</a>
    <div class="footer">
        <p><span><i class="fa fa-copyright"></i></span>爱家租房&nbsp;&nbsp;享受家的温馨</p>
    </div>-->
</div>

<script src="/static/js/jquery.min.js"></script>
<script src="/static/plugins/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/plugins/swiper/js/swiper.jquery.min.js"></script>
<script src="/static/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
<script src="/static/plugins/bootstrap-datepicker/locales/bootstrap-datepicker.zh-CN.min.js"></script>
<script src="/static/js/template.js"></script>
<!--<script src="/static/js/ihome/detail.js"></script>-->
<script type="text/html" id="house-image-tml">

    <div class="top-bar">
        <div class="nav-bar">
            <h3 class="page-title">房间信息</h3>
            <a class="nav-btn fl" href="#" onclick="hrefBack();"><span><i class="fa fa-angle-left fa-2x"></i></span></a>
        </div>
    </div>
    <div class="swiper-container">
        <ul class="swiper-wrapper">
            {{ each data.house.img_urls as img_url}}
            <li class="swiper-slide"><img src="{{ img_url }}"></li>
            {{ /each }}
        </ul>
        <div class="swiper-pagination"></div>
        <div class="house-price">￥<span>{{data.house.price/100}}</span>/晚</div>
    </div>
    <div class="detail-con">
        <div class="detail-header layout-style">
            <h2 class="house-title">房屋标题</h2>
            <div class="landlord-pic"><img src="{{data.house.user_avatar  }}"></div>
            <h2 class="landlord-name">房东： <span>{{ data.house.user_name }}</span></h2>
        </div>
        <div class="house-info layout-style">
            <h3>房屋地址</h3>
            <ul class="house-info-list text-center">
                <li>{{ data.house.address }}</li>
            </ul>
        </div>
        <ul class="house-type layout-style">
            <li>
                <span class="icon-house"></span>
                <div class="icon-text">
                    <h3>出租{{ data.house.room_count }}间</h3>
                    <p>房屋面积:{{ data.house.acreage }}平米</p>
                    <p>房屋户型:{{ data.house.unit }}</p>
                </div>
            </li>
            <li>
                <span class="icon-user"></span>
                <div class="icon-text">
                    <h3>宜住{{ data.house.capacity }}人</h3>
                </div>
            </li>
            <li>
                <span class="icon-bed"></span>
                <div class="icon-text">
                    <h3>卧床配置</h3>
                    <p>{{ data.house.beds }}</p>
                </div>
            </li>
        </ul>
        <div class="house-info layout-style">
            <h3>房间详情</h3>
            <ul class="house-info-list">
                <li>收取押金<span>{{ data.house.deposit }}</span></li>
                <li>最少入住天数<span>{{ data.house.min_days }}</span></li>
                <li>最多入住天数
                    {{ if data.house.max_days==0}}
                        <span>不限制</span>
                    {{ else }}
                        <span>{{ data.house.max_days }}</span>
                    {{ /if }}
               </li>
            </ul>
        </div>
        <div class="house-facility layout-style">
            <h3>配套设施</h3>
            <ul class="house-facility-list clearfix">
                <li><span class="{{ if data.house.facilities.indexOf(1)>=0 }}jinzhi-ico{{ else }}wirelessnetwork-ico{{ /if }}"></span>无线网络</li>
                <li><span class="{{ if data.house.facilities.indexOf(2)>=0 }}jinzhi-ico{{ else }}shower-ico{{ /if }}"></span>热水淋浴</li>
                <li><span class="{{ if data.house.facilities.indexOf(3)>=0 }}jinzhi-ico{{ else }}aircondition-ico{{ /if }}"></span>空调</li>
                <li><span class="{{ if data.house.facilities.indexOf(4)>=0 }}jinzhi-ico{{ else }}heater-ico{{ /if }}"></span>暖气</li>
                <li><span class="{{ if data.house.facilities.indexOf(5)>=0 }}jinzhi-ico{{ else }}smoke-ico{{ /if }}"></span>允许吸烟</li>
                <li><span class="{{ if data.house.facilities.indexOf(6)>=0 }}jinzhi-ico{{ else }}drinking-ico{{ /if }}"></span>饮水设备</li>
                <li><span class="{{ if data.house.facilities.indexOf(7)>=0 }}jinzhi-ico{{ else }}brush-ico{{ /if }}"></span>牙具</li>
                <li><span class="{{ if data.house.facilities.indexOf(8)>=0 }}jinzhi-ico{{ else }}soap-ico{{ /if }}"></span>香皂</li>
                <li><span class="{{ if data.house.facilities.indexOf(9)>=0 }}jinzhi-ico{{ else }}slippers-ico{{ /if }}"></span>拖鞋</li>
                <li><span class="{{ if data.house.facilities.indexOf(10)>=0 }}jinzhi-ico{{ else }}toiletpaper-ico{{ /if }}"></span>手纸</li>
                <li><span class="{{ if data.house.facilities.indexOf(11)>=0 }}jinzhi-ico{{ else }}towel-ico{{ /if }}"></span>毛巾</li>
                <li><span class="{{ if data.house.facilities.indexOf(12)>=0 }}jinzhi-ico{{ else }}toiletries-ico{{ /if }}"></span>沐浴露、洗发露</li>
                <li><span class="{{ if data.house.facilities.indexOf(13)>=0 }}jinzhi-ico{{ else }}icebox-ico{{ /if }}"></span>冰箱</li>
                <li><span class="{{ if data.house.facilities.indexOf(14)>=0 }}jinzhi-ico{{ else }}washer-ico{{ /if }}"></span>洗衣机</li>
                <li><span class="{{ if data.house.facilities.indexOf(15)>=0 }}jinzhi-ico{{ else }}elevator-ico{{ /if }}"></span>电梯</li>
                <li><span class="{{ if data.house.facilities.indexOf(16)>=0 }}jinzhi-ico{{ else }}iscook-ico{{ /if }}"></span>允许做饭</li>
                <li><span class="{{ if data.house.facilities.indexOf(17)>=0 }}jinzhi-ico{{ else }}pet-ico{{ /if }}"></span>允许带宠物</li>
                <li><span class="{{ if data.house.facilities.indexOf(18)>=0 }}jinzhi-ico{{ else }}meet-ico{{ /if }}"></span>允许聚会</li>
                <li><span class="{{ if data.house.facilities.indexOf(19)>=0 }}jinzhi-ico{{ else }}accesssys-ico{{ /if }}"></span>门禁系统</li>
                <li><span class="{{ if data.house.facilities.indexOf(20)>=0 }}jinzhi-ico{{ else }}parkingspace-ico{{ /if }}"></span>停车位</li>
                <li><span class="{{ if data.house.facilities.indexOf(21)>=0 }}jinzhi-ico{{ else }}tv-ico{{ /if }}"></span>电视</li>
                <li><span class="{{ if data.house.facilities.indexOf(22)>=0 }}jinzhi-ico{{ else }}jinzhi-ico{{ /if }}"></span>浴缸</li>


            </ul>
        </div>
        <div class="house-info layout-style">
            <h3>评价信息</h3>
            {{ each data.house.comments as comment }}
            <ul class="house-comment-list">
                <li>
                    <p>{{ comment.user_name }}<span class="fr">{{ comment.ctime }}</span></p>
                    <p>{{ comment.comment }}</p>
                </li>
            </ul>
            {{ /each }}
        </div>
    </div>
    <a class="book-house" href="">即刻预定</a>
    <div class="footer">
        <p><span><i class="fa fa-copyright"></i></span>爱家租房&nbsp;&nbsp;享受家的温馨</p>
    </div>

</script>
</body>
</html>

<script>
    function hrefBack() {
        history.go(-1);
    }

    function decodeQuery() {
        var search = decodeURI(document.location.search);
        return search.replace(/(^\?)/, '').split('&').reduce(function (result, item) {
            values = item.split('=');
            result[values[0]] = values[1];
            return result;
        }, {});
    }


    $(document).ready(function () {

        //获取url的id值
        var queryData = decodeQuery()
        var houseId = queryData['id']
        console.log(houseId)

        $.get('/api/v1.0/houses/' + houseId, function (res) {
            console.log(res)
            if (res.errno == '0') {
                $('.container').html(template("house-image-tml", {data: res.data}));


                if (res.data.user_id != res.data.house.user_id) {
                    $(".book-house").attr("href", "/booking.html?hid=" + res.data.house.hid);
                    $(".book-house").show();
                }

                if (res.data.house.img_urls.length>1){
                    var mySwiper = new Swiper('.swiper-container', {
                    loop: true,
                    autoplay: 2000,
                    autoplayDisableOnInteraction: false,
                    pagination: '.swiper-pagination',
                    paginationType: 'fraction'
                    })
                }


            }
        })


    })
</script>